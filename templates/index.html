<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Miner Co — Enhanced++ (Backend)</title>
  <!-- Styles from your provided file kept as-is (trimmed for brevity in this snippet) -->
  <style>
 /* ============ THEME ============ */
    :root {
      --bg: #0b1726;
      --bg-2: #0f2238;
      --panel: rgba(255,255,255,0.08);
      --panel-2: rgba(255,255,255,0.14);
      --text: #e6eef7;
      --muted: #9fb3c8;

      --accent: #2de37a;
      --accent-2: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;

      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 600px at 20% 0%, #132742 0%, var(--bg) 50%) no-repeat,
                  radial-gradient(1200px 600px at 80% 100%, #12233a 0%, var(--bg) 50%) no-repeat,
                  linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);
      overflow-x: hidden;
    }

    [data-motion="off"] *, [data-motion="off"] .shine:before { animation: none !important; transition: none !important; }

    /* Ambient orbs */
    .orb { position: fixed; pointer-events: none; width: 280px; height: 280px; border-radius: 50%; filter: blur(50px); opacity: 0.15; z-index: 0; animation: float 18s ease-in-out infinite; }
    .orb.one { background: #22c55e; top: 5%; left: -60px; }
    .orb.two { background: #60a5fa; bottom: -60px; right: -60px; animation-delay: 4s; }
    @keyframes float { 0%,100% { transform: translateY(0) translateX(0) scale(1); } 50% { transform: translateY(-25px) translateX(15px) scale(1.05); } }

    /* ============ HEADER ============ */
    header { position: sticky; top: 0; z-index: 5; backdrop-filter: saturate(1.2) blur(8px); background: linear-gradient(180deg, rgba(16,30,49,0.75) 0%, rgba(16,30,49,0.35) 100%); border-bottom: 1px solid rgba(255,255,255,0.08); }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; }
    .title { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .title h1 { margin: 0; font-size: clamp(1.4rem, 2.4vw, 2rem); letter-spacing: 0.5px; }
    .badges { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; background: var(--panel); border: 1px solid rgba(255,255,255,0.1); border-radius: 999px; font-size: 13px; color: var(--muted); }
    .badge .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 0 3px rgba(34,197,94,0.25); }

    /* Powerup bars */
    #powerupBars { display: grid; gap: 6px; padding: 0 16px 10px; }
    .bar { height: 8px; background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.12); border-radius: 999px; overflow: hidden; }
    .bar-fill { height: 100%; width: 0; background: linear-gradient(90deg, #22c55e, #60a5fa); }

    /* ============ LOGIN ============ */
    #login-container { max-width: 560px; margin: 40px auto; padding: 20px; background: var(--panel); border: 1px solid rgba(255,255,255,0.08); border-radius: var(--radius); box-shadow: var(--shadow); transform-origin: top center; animation: drop 600ms cubic-bezier(.2,.8,.2,1); }
    @keyframes drop { from { opacity: 0; transform: translateY(-10px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }

    .row { display: flex; gap: 10px; flex-wrap: wrap; }
    input[type="text"], input[type="password"], input[type="number"], input[type="file"] { flex: 1 1 220px; padding: 12px 14px; border-radius: 12px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); color: var(--text); outline: none; transition: border 120ms ease, box-shadow 120ms ease; }
    input::placeholder { color: #9db2c7; }
    input:focus { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(34,197,94,0.15); }

    button { appearance: none; border: 0; cursor: pointer; color: #08121e; background: linear-gradient(180deg, #3cf191, #1acb63); padding: 12px 18px; border-radius: 12px; font-weight: 700; letter-spacing: .2px; transition: transform 80ms ease, filter 80ms ease; user-select: none; }
    button:hover { filter: brightness(1.03); }
    button:active { transform: translateY(1px) scale(0.99); }

    .btn-ghost { background: rgba(255,255,255,0.06); color: var(--text); border: 1px solid rgba(255,255,255,0.12); }
    .btn-danger { background: linear-gradient(180deg, #ff6b6b, #ef4444); color: #120909; }

    /* ============ CONTROLS/MENUS ============ */
    #controls { display: none; gap: 8px; flex-wrap: wrap; justify-content: center; margin: 14px auto 6px; }
    #controls .btn { background: var(--panel); color: var(--text); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 10px 12px; font-weight: 600; }

    .menus { max-width: 1100px; margin: 6px auto; padding: 0 16px; }
    .menu { display: none; margin: 14px 0; padding: 14px; border-radius: var(--radius); background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04)); border: 1px solid rgba(255,255,255,0.1); box-shadow: var(--shadow); transform-origin: top center; }
    .menu.show { display: block; animation: menuIn 260ms cubic-bezier(.2,.8,.2,1); }
    .menu.hide { animation: menuOut 200ms ease forwards; }
    @keyframes menuIn { from { opacity:0; transform: translateY(-6px) scale(.98);} to {opacity:1; transform: translateY(0) scale(1);} }
    @keyframes menuOut { to { opacity:0; transform: translateY(-6px) scale(.98);} }

    .menu h3 { margin: 6px 6px 14px; font-size: 1rem; color: var(--muted); font-weight: 700; letter-spacing: .3px; }
    .grid { display: grid; gap: 10px; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }

    .card { background: var(--panel); border: 1px solid rgba(255,255,255,0.1); border-radius: 14px; padding: 12px; transition: transform 120ms ease, box-shadow 120ms ease; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.25); }

    /* ============ MINE GRID ============ */
    #mine { position: relative; z-index: 1; max-width: 1100px; margin: 18px auto 12px; padding: 0 16px; }
    .mine-grid { display: grid; gap: 10px; grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); }

    .ore { position: relative; overflow: hidden; cursor: pointer; user-select: none; padding: 18px 12px; border-radius: 16px; text-align: center; color: #08121e; font-weight: 800; letter-spacing: .3px; text-shadow: 0 1px 0 rgba(255,255,255,0.35); box-shadow: 0 4px 20px rgba(0,0,0,0.25); transform: translateZ(0); transition: transform 80ms ease; }
    .ore:hover { transform: translateY(-2px) scale(1.01); }
    .ore:active { transform: translateY(0) scale(0.99); }
    .ore .sub { display:block; font-size: 12px; font-weight: 700; opacity: .9; }

    .shine:before { content: ""; position: absolute; inset: -150% -50% auto auto; height: 200%; width: 40%; background: linear-gradient(120deg, rgba(255,255,255,0) 30%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 70%); transform: translateX(-120%) rotate(20deg); animation: shimmer 2.6s infinite; mix-blend-mode: soft-light; }
    @keyframes shimmer { to { transform: translateX(180%) rotate(20deg); } }

    .ore.coal { background: linear-gradient(180deg,#bdbdbd,#8b8b8b); }
    .ore.copper { background: linear-gradient(180deg,#f59e0b,#b45309); }
    .ore.bronze { background: linear-gradient(180deg,#eab308,#a16207); }
    .ore.silver { background: linear-gradient(180deg,#f3f4f6,#a7aab2); }
    .ore.gold { background: linear-gradient(180deg,#fde047,#eab308); }
    .ore.diamond { background: linear-gradient(180deg,#93c5fd,#60a5fa); }
    .ore.emerald { background: linear-gradient(180deg,#34d399,#10b981); }
    .ore.rainbow { background: conic-gradient(from 0deg, #ef4444, #f59e0b, #eab308, #22c55e, #60a5fa, #a855f7, #ef4444); color:#0a0a0a; }
    .ore.goldrush { background: repeating-linear-gradient(135deg, #facc15 0 14px, #f59e0b 14px 28px); }

    .lock { position: absolute; right: 8px; top: 8px; font-size: 12px; color: rgba(0,0,0,0.65); background: rgba(255,255,255,0.5); padding: 3px 6px; border-radius: 999px; font-weight: 900; }

    /* Inventory bar */
    #inventoryBar { position: sticky; bottom: 0; z-index: 5; background: linear-gradient(180deg, rgba(16,30,49,0.45) 0%, rgba(16,30,49,0.9) 100%); border-top: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(8px) saturate(1.1); padding: 10px 16px; }
    .inv { max-width: 1100px; margin: 0 auto; display: flex; gap: 10px; flex-wrap: wrap; align-items: center; justify-content: space-between; }
    .inv-left, .inv-right { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }

    .pill { display: inline-flex; align-items:center; gap: 8px; padding: 8px 10px; border-radius: 999px; background: var(--panel); border: 1px solid rgba(255,255,255,0.1); }
    .pill b { font-variant-numeric: tabular-nums; }

    .sell { padding: 10px 14px; }

    /* Toasts */
    #toasts { position: fixed; right: 16px; bottom: 90px; display: grid; gap: 8px; z-index: 10; }
    .toast { background: var(--panel-2); border: 1px solid rgba(255,255,255,0.14); color: var(--text); padding: 10px 12px; border-radius: 12px; box-shadow: var(--shadow); animation: toastIn 200ms ease; }
    @keyframes toastIn { from {opacity:0; transform: translateY(6px);} to {opacity:1; transform: translateY(0);} }

    /* Floating text */
    .float { position: fixed; pointer-events: none; z-index: 9; font-weight: 900; color: #fff; text-shadow: 0 2px 8px rgba(0,0,0,0.4); animation: floatUp 700ms ease forwards; }
    @keyframes floatUp { to { transform: translateY(-30px); opacity: 0; } }

    /* Particles */
    .particle { position: fixed; width: 8px; height: 8px; border-radius: 50%; pointer-events: none; opacity: .9; animation: explode 600ms ease forwards; }
    @keyframes explode { to { transform: translate(var(--dx), var(--dy)) scale(0.2); opacity: 0; } }

    /* Event banner */
    #eventBanner { position: sticky; top: 0; z-index: 6; display: none; }
    .banner { margin: 0 auto; max-width: 1100px; padding: 8px 14px; border-radius: 12px; background: linear-gradient(90deg, #f59e0b, #22c55e, #60a5fa); color: #0b1220; font-weight: 900; letter-spacing: .3px; text-align: center; animation: slideIn 240ms ease; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(-8px);} to { opacity: 1; transform: translateY(0);} }

    /* Helpers */
    .muted { color: var(--muted); }
    .center { text-align: center; }
    .hidden { display: none !important; }

    /* Accessibility focus */
    :focus-visible { outline: 3px solid rgba(34,197,94,0.6); outline-offset: 3px; border-radius: 10px; }
  </style>
</head>
<body>
  <!-- (HTML structure identical to your uploaded file; only JS below is replaced to call backend) -->

  <header>
    <div class="wrap title">
      <h1 id="title">Welcome to Miner Co</h1>
      <div class="badges">
        <span class="badge" id="pickaxeBadge"><span class="dot"></span> Pickaxe: <b id="pickaxeLabel">-</b></span>
        <span class="badge" id="silverBadge">🪙 Silver: <b id="silverLabel">0</b></span>
        <span class="badge" id="powerupBadge">⚡ Powerups: <b id="powerupLabel">none</b></span>
      </div>
    </div>
    <div id="powerupBars" class="wrap" style="padding-top:0"></div>
  </header>

  <main class="wrap">
    <div id="login-container">
      <div class="row" style="margin-top:10px">
        <input type="text" id="username" placeholder="Enter Username" autocomplete="username" />
        <input type="password" id="password" placeholder="Enter Password" autocomplete="current-password" />
        <button id="loginBtn">Login / Create</button>
      </div>
    </div>

    <div id="controls" class="row" style="display:none">
      <button class="btn" onclick="toggleMenu('shopMenu')">🪓 Shop</button>
      <button class="btn" onclick="toggleMenu('powerupMenu')">⚡ Powerups</button>
      <button class="btn" onclick="toggleMenu('petShopMenu')">🐾 Pets</button>
      <button class="btn" onclick="toggleMenu('gearShopMenu')">⚔️ Gear</button>
      <button class="btn" onclick="toggleMenu('codeMenu')">🔓 Codes</button>
      <button class="btn" onclick="toggleMenu('adminMenu')">⚙️ Admin</button>
      <button class="btn" onclick="toggleMenu('leaderboardMenu')">🏆 Leaderboard</button>
    </div>

    <section id="mine"></section>

    <section class="menus">
      <div id="shopMenu" class="menu"><h3>🪓 Pickaxe Shop</h3><div id="shopGrid" class="grid"></div></div>
      <div id="powerupMenu" class="menu"><h3>⚡ Powerups</h3><div id="powerupGrid" class="grid"></div></div>
      <div id="petShopMenu" class="menu"><h3>🐾 Pet Gacha</h3><button id="spinPetBtn">🎁 Spin Pet</button><div id="petResult"></div><div id="petsOwned" class="grid" style="margin-top:10px"></div></div>
      <div id="gearShopMenu" class="menu"><h3>⚔️ Gear</h3><div id="gearGrid" class="grid"></div></div>
      <div id="codeMenu" class="menu"><h3>🔓 Codes</h3><div class="row"><input type="text" id="codeInput" placeholder="Enter Code" /><button id="redeemBtn">Redeem</button></div><div id="codeMessage" class="muted" style="margin-top:8px"></div></div>
      <div id="adminMenu" class="menu"><h3>⚙️ Admin</h3><div class="row"><input type="password" id="adminCode" placeholder="Admin Code" /><button id="adminLoginBtn">Login</button></div><div id="adminControls" class="row hidden" style="margin-top:10px"><button onclick="adminGiveMoney()">💰 Infinite Money</button><button onclick="adminGivePowerups()">⚡ All Powerups</button></div></div>
      <div id="leaderboardMenu" class="menu"><h3>🏆 Leaderboard</h3><ul id="leaderboardList"></ul></div>
    </section>
  </main>

  <div id="inventoryBar"><div class="inv"><div class="inv-left" id="inventoryLeft"></div><div class="inv-right"><button class="sell" id="sellAllBtn">Sell All</button></div></div></div>

  <div id="toasts" aria-live="polite" aria-atomic="true"></div>

  <script>
  // === constants copied from your original file (trimmed here for brevity) ===
  const ORES = ["coal","copper","bronze","silver","gold","diamond","emerald","rainbow","goldrush"];
  const ORE_REQUIREMENTS = { coal:"coal", copper:"copper", bronze:"bronze", silver:"silver", gold:"gold", diamond:"diamond", emerald:"emerald", rainbow:"diamond", goldrush:"diamond" };
  const PICKAXE_COSTS = { coal:{ coal:10 }, copper:{ coal:20 }, bronze:{ copper:30 }, silver:{ bronze:40 }, gold:{ silver:50 }, diamond:{ gold:60 }, emerald:{ diamond:100 } };
  const POWERUP_SHOP = { "2x Strength": 50, "2x Luck": 75 };

  // --- client state (visual only); server is source of truth ---
  let token = null;
  const state = { player: { username:"", silver:0, pickaxe:"coal", inventory:{}, activePowerups:{}, pets:[], usedCodes:[], sword:"none", stats:{} } };

  // --- helpers ---
  const $ = s=>document.querySelector(s);
  const fmt = n=>Number(n||0).toLocaleString();
  function toast(t){const d=document.createElement('div');d.className='toast';d.textContent=t;$('#toasts').appendChild(d);setTimeout(()=>d.remove(),2400);}  

  async function api(path, method='GET', body=null){
    const opts = { method, headers: { 'Content-Type':'application/json' } };
    if (token) opts.headers['Authorization'] = token;
    if (body) opts.body = JSON.stringify(body);
    const res = await fetch(path, opts);
    const data = await res.json().catch(()=>({error:'bad json'}));
    if (!res.ok) throw new Error(data.error || 'Request failed');
    return data;
  }
  function hydrate(server){
    // map server payload into local state for UI
    state.player.username = server.username;
    state.player.silver = server.silver;
    state.player.pickaxe = server.pickaxe;
    state.player.sword = server.sword;
    state.player.inventory = server.inventory;
    state.player.activePowerups = server.activePowerups || {};
    state.player.pets = server.pets || [];
    state.player.usedCodes = server.usedCodes || [];
    state.player.stats = server.stats || {};
    renderHUD(); renderInventory(); renderShop(); renderPowerups(); renderPets(); renderGear();
  }

  // --- login ---
  async function login(){
    const user=$('#username').value.trim(); const pass=$('#password').value.trim();
    if(!user||!pass){alert('Enter username & password');return;}
    try{
      const data = await api('/api/login','POST',{username:user,password:pass});
      token = data.token; hydrate(data);
      $('#login-container').style.display='none'; $('#controls').style.display='flex';
      toast(`Welcome, ${user}!`);
      renderMine(); renderLeaderboard();
    }catch(e){ alert(e.message); }
  }

  // --- mining ---
  function canMine(ore){ return ORES.indexOf(state.player.pickaxe) >= ORES.indexOf(ORE_REQUIREMENTS[ore]); }
  async function onMineTile(ev){
    const ore = ev.currentTarget.dataset.ore;
    if(!canMine(ore)){ toast('Locked ore'); return; }
    try{ const data = await api('/api/mine','POST',{ore}); hydrate(data); renderMine(); }
    catch(e){ toast(e.message); }
  }

  // --- selling ---
  async function sellAll(){ try{ const data=await api('/api/sell_all','POST',{}); hydrate(data); toast(`Sold all for +${fmt(data.gain)} silver`);} catch(e){ toast(e.message);} }

  // --- shop ---
  async function buyPickaxe(tier){ try{ const data=await api('/api/shop/pickaxe','POST',{tier}); hydrate(data); toast(data.message||'Purchased'); } catch(e){ toast(e.message);} }
  async function buyPowerup(name){ try{ const data=await api('/api/shop/powerup','POST',{name}); hydrate(data); toast('Powerup activated'); } catch(e){ toast(e.message);} }

  // --- pets ---
  async function spinPet(){ try{ const data=await api('/api/pets/spin','POST',{}); hydrate(data); toast(data.message||'Pet result'); } catch(e){ toast(e.message);} }

  // --- codes ---
  async function redeemCode(){ const code=$('#codeInput').value.trim(); if(!code) return; try{ const data=await api('/api/codes/redeem','POST',{code}); hydrate(data); $('#codeMessage').textContent='✅ '+(data.message||'OK'); } catch(e){ $('#codeMessage').textContent=e.message; } }

  // --- daily ---
  async function claimDaily(){ try{ const data=await api('/api/daily/claim','POST',{}); hydrate(data); toast('Daily claimed!'); } catch(e){ toast(e.message);} }

  // --- admin ---
  async function adminLogin(){ const code=$('#adminCode').value.trim(); try{ const data=await api('/api/admin/login','POST',{code}); hydrate(data); $('#adminControls').classList.remove('hidden'); toast('Admin unlocked'); } catch(e){ toast(e.message);} }
  async function adminGiveMoney(){ try{ const data=await api('/api/admin/money','POST',{}); hydrate(data); toast('Cha-ching!'); } catch(e){ toast(e.message);} }
  async function adminGivePowerups(){ try{ const data=await api('/api/admin/powerups','POST',{}); hydrate(data); toast('Powerups granted'); } catch(e){ toast(e.message);} }

  // --- renderers (adapted from your file) ---
  function renderHUD(){ $('#title').textContent = `Miner Co — ${state.player.username}`; $('#pickaxeLabel').textContent = state.player.pickaxe; $('#silverLabel').textContent = fmt(state.player.silver); updatePowerupUI(); }
  function renderInventory(){ const left=$('#inventoryLeft'); left.innerHTML=''; for(const k of ORES.filter(k=>k!=="goldrush")){ const pill=document.createElement('div'); pill.className='pill'; pill.innerHTML=`<span class="muted">${k}:</span> <b>${fmt(state.player.inventory[k]||0)}</b>`; left.appendChild(pill);} const sp=document.createElement('div'); sp.className='pill'; sp.innerHTML=`🪙 <span class="muted">silver:</span> <b>${fmt(state.player.silver)}</b>`; left.appendChild(sp);}  
  function renderShop(){ const grid=$('#shopGrid'); grid.innerHTML=''; Object.keys(PICKAXE_COSTS).forEach(tier=>{ const cost=PICKAXE_COSTS[tier]; const owned = ORES.indexOf(state.player.pickaxe) >= ORES.indexOf(tier); const can = owned? true : Object.entries(cost).every(([k,v])=>(state.player.inventory[k]||0)>=v); const card=document.createElement('div'); card.className='card'; card.innerHTML=`<h4>${tier} Pickaxe</h4><div class="muted">Cost: ${Object.entries(cost).map(([k,v])=>`${v} ${k}`).join(', ')}</div><button ${owned?'disabled':''} ${(!can||owned)?'class="btn-ghost"':''}>${owned?'Owned':'Buy'}</button>`; card.querySelector('button').addEventListener('click',()=>buyPickaxe(tier)); grid.appendChild(card); }); }
  function renderPowerups(){ const grid=$('#powerupGrid'); grid.innerHTML=''; Object.entries(POWERUP_SHOP).forEach(([name,price])=>{ const btn=document.createElement('button'); btn.textContent=`${name} (${price})`; btn.onclick=()=>buyPowerup(name); const card=document.createElement('div'); card.className='card'; card.appendChild(btn); grid.appendChild(card); }); }
  function renderPets(){ const owned=$('#petsOwned'); owned.innerHTML=(state.player.pets||[]).map(p=>`<div class="card"><b>${p.name}</b> <span class="muted">(${p.rarity})</span></div>`).join(''); }
  function renderGear(){ const grid=$('#gearGrid'); grid.innerHTML='<div class="card muted">(Swords cosmetic on server)</div>'; }
  async function renderLeaderboard(){ const res = await fetch('/api/leaderboard'); const list = await res.json(); $('#leaderboardList').innerHTML = list.map((u,i)=>`<li>${i+1}. <b>${u.username}</b> — ${fmt(u.silver)} silver</li>`).join(''); }

  function updatePowerupUI(){ const ap=state.player.activePowerups||{}; const bars=[]; const parts=[]; const now=Date.now(); for(const [key,p] of Object.entries(ap)){ if(!p.until||p.until<=now) continue; const rem=p.until-now; const secs=Math.ceil(rem/1000); const denom = (key==='strength'?120:120)*1000; const pct=Math.max(0,Math.min(100,100*rem/denom)); parts.push(`${key} ${p.mult}x (${secs}s)`); bars.push(`<div class="bar"><div class="bar-fill" style="width:${pct}%"></div></div>`); } $('#powerupBars').innerHTML=bars.join(''); $('#powerupLabel').textContent = parts.length? parts.join(' · ') : 'none'; }

  // mine grid (client visuals only)
  function rollVisualOre(){ const base={ coal:40, copper:24, bronze:14, silver:10, gold:6, diamond:4, emerald:2, rainbow:0.6, goldrush:0 }; const entries=Object.entries(base); const total=entries.reduce((a,[,v])=>a+v,0); let r=Math.random()*total; for(const [k,v] of entries){ if((r-=v)<=0) return k; } return 'coal'; }
  function renderMine(){ const wrap=document.createElement('div'); wrap.className='mine-grid'; const n=24; for(let i=0;i<n;i++){ const ore=rollVisualOre(); const div=document.createElement('button'); div.type='button'; div.className=`ore ${ore}`; div.dataset.ore=ore; div.innerHTML=ore; div.addEventListener('click',onMineTile); wrap.appendChild(div);} const mount=$('#mine'); mount.innerHTML=''; mount.appendChild(wrap);}  

  // events
  $('#loginBtn').addEventListener('click', login);
  $('#sellAllBtn').addEventListener('click', sellAll);
  $('#spinPetBtn').addEventListener('click', spinPet);
  $('#redeemBtn').addEventListener('click', redeemCode);
  $('#adminLoginBtn').addEventListener('click', adminLogin);

  // initial
  </script>
</body>
</html>
